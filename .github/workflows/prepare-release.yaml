name: Prepare release

on:
  push:
    branches:
      - '*'
#       - 'release-**'
#       - 'patch-**'

jobs:
  branch-checks:
    runs-on: ubuntu-latest
    steps:
      - id: get-branch
        run: |
          BRANCH=($(echo ${{ github.ref }} | sed -E 's/refs\/heads\///'))
          echo "branch=$BRANCH" >> $GITHUB_ENV
    outputs:
      branch: ${{ env.branch }}
      is-release-branch: ${{ startsWith(env.branch, 'release-') }}
      is-patch-branch: ${{ startsWith(env.branch, 'patch-') }}

  handle-release:
    runs-on: ubuntu-latest
    needs: branch-checks
    steps:
      - name: Any Name Bash Test Step
        shell: bash
        run: |
          echo "BRANCH: $BRANCH"
          echo "IS_PATCH: $IS_PATCH"
          echo "IS_RELEASE: $IS_RELEASE"
        env:
          BRANCH: ${{ needs.branch-checks.outputs.branch }}
          IS_PATCH: ${{ needs.branch-checks.outputs.is-patch-branch }}
          IS_RELEASE: ${{ needs.branch-checks.outputs.is-release-branch }}

#   handle-patch-release
